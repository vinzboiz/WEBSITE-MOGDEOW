<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Trang tài khoản</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap"
    />
    <link rel="stylesheet" href="../Styles/Reset.css" />
    <link rel="stylesheet" href="../Styles/Layout/Header.css" />
    <link rel="stylesheet" href="../Styles/Layout/Footer.css" />
    <link rel="stylesheet" href="../Styles/Pages/Account/Account.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
  </head>

  <body>
    <div id="header"></div>

    <div class="container mt-5">
      <div class="row">
        <!-- Menu trái -->
        <div class="col-md-3">
          <h3 class="text-center">Trang tài khoản</h3>
          <p>
            <strong>Xin chào, <span id="user-name">Duy Tháng Hồ</span>!</strong>
          </p>
          <div id="menu-container"></div>
          <!-- Menu will be injected here based on role -->
        </div>

        <!-- Nội dung tài khoản -->
        <div class="col-md-9">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h4>Thông tin tài khoản</h4>
            </div>
            <div class="card-body">
              <form id="account-form">
                <div class="mb-3">
                  <label for="account-name-input" class="form-label"
                    >Họ tên</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="account-name-input"
                    value="Duy Tháng Hồ"
                  />
                </div>
                <div class="mb-3">
                  <label for="account-email-input" class="form-label"
                    >Email</label
                  >
                  <input
                    type="email"
                    class="form-control"
                    id="account-email-input"
                    value="hdtzeft@gmail.com"
                  />
                </div>
                <div class="mb-3">
                  <label for="account-phone-input" class="form-label"
                    >Số điện thoại</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="account-phone-input"
                    value="0123456789"
                  />
                </div>

                <div class="mb-3">
                  <label for="account-img-input" class="form-label"
                    >Ảnh đại diện</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    id="account-img-input"
                    accept="image/*"
                  />
                  <img
                    id="account-img-preview"
                    src=""
                    alt="Ảnh người dùng"
                    class="img-thumbnail mt-3"
                    style="width: 150px"
                  />
                </div>

                <div class="mb-3 password-container">
                  <label for="account-password-input" class="form-label"
                    >Mật khẩu</label
                  >
                  <input
                    type="password"
                    class="form-control"
                    id="account-password-input"
                    value="12345"
                    readonly
                  />
                </div>

                <!-- Sửa lại 3 combobox vào cùng một hàng ngang -->
                <div class="row">
                  <div class="col-md-4">
                    <label for="province" class="form-label"
                      >Tỉnh/Thành phố</label
                    >
                    <select class="form-control" id="province">
                      <!-- Options sẽ được tải từ API -->
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label for="district" class="form-label">Quận/Huyện</label>
                    <select class="form-control" id="district">
                      <!-- Options sẽ được tải từ API -->
                    </select>
                  </div>

                  <div class="col-md-4">
                    <label for="ward" class="form-label">Phường/Xã</label>
                    <select class="form-control" id="ward">
                      <!-- Options sẽ được tải từ API -->
                    </select>
                  </div>
                </div>

                <button type="button" class="btn btn-primary" id="update-btn">
                  Cập nhật
                </button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="footer"></div>

    <script src="../JavaScripts/Common/AddLayout.js"></script>
    <script src="../JavaScripts/Common/LoadHeader.js"></script>
    <script src="../JavaScripts/Common/LoadFooter.js"></script>
    <script src="../JavaScripts/Account/Location.js"></script>
    <script src="../JavaScripts/Account/Menu.js"></script>
    <script>
      function renderMenu(role) {
        const menuContainer = document.getElementById("menu-container");
        let menuHTML = `
      <a href="../Pages/Account.html" class="list-group-item">Thông tin tài khoản</a>
      <a href="../Pages/Orders.html" class="list-group-item">Đơn hàng của bạn</a>
      <a href="../Pages/ChangePassword.html" class="list-group-item">Đổi mật khẩu</a>
    `;

        if (role === "Admin") {
          menuHTML += `
        <a href="#" class="list-group-item">Quản lý tài khoản</a>
        <a href="#" class="list-group-item">Quản lý sản phẩm</a>
      `;
        }

        menuHTML += `
      <button class="list-group-item text-danger" id="logout-btn" style="background-color: transparent; border: none; text-align: left; cursor: pointer;">
        Đăng xuất
      </button>
      `;

        menuContainer.innerHTML = menuHTML;

        document
          .getElementById("logout-btn")
          .addEventListener("click", function () {
            alert("Đăng xuất thành công!");

            localStorage.removeItem("role");

            window.location.href = "../Pages/Home.html";
          });
      }

      // Simulate getting the role from session/localStorage
      const userRole = "Admin";
      renderMenu(userRole);
    </script>
  </body>
</html>
